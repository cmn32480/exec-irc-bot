unit Utils;

interface

uses
  Windows,
  SysUtils,
  Classes,
  Graphics,
  Controls,
  Forms,
  Dialogs,
  ExtCtrls,
  StrUtils;

function ExtractSerialzedString(const S: string; var Ret: string): Boolean;
function StrReplace(const From: string; const To: string; const Subject: string): string;

implementation

// Fmsg_time_dt := DateUtils.UnixToDateTime(Round(msg_time));
// Fmsg_time_str := SysUtils.FormatDateTime('yyyy-mm-dd hh:nn:ss', msg_time_dt);

function ExtractSerialzedString(const S: string; var Ret: string): Boolean;
var
  i: Integer;
  L: Integer;
begin
  Result := False;
  Ret := '';
  i := Pos(':', S);
  if i <= 0 then
    Exit;
  try
    L := SysUtils.StrToInt(Copy(S, 1, i - 1));
  except
    Exit;
  end;
  if Length(S) < (i + 2) then
    Exit;
  Ret := Copy(S, i + 2, L);
  Result := True;
end;

function StrReplace(const FromStr: string; const ToStr: string; const Subject: string): string;
var
  i: Integer;
  S: string;
begin
  if FromStr = ToStr then
  begin
    Result := Subject;
    Exit;
  end;
  repeat
    i := Pos(From, Subject);
    if i > 0 then
    begin

    end;
  until i = -1;
end;

end.